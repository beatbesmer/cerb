{
    "name": "cerb.ticket.move",
    "description": "An interaction for quickly moving tickets",
    "extension_id": "cerb.trigger.interaction.worker",
    "is_unlisted": 0,
    "script": "inputs:\n  record/ticket:\n    record_type: ticket\n    required@bool: no\n\nstart:\n  await/group:\n    form:\n      title: Move ticket\n      elements:\n        sheet/prompt_group_id:\n          label: To which group:\n          required@bool: yes\n          default: {{inputs.ticket.group_id}}\n          data:\n            automation:\n              uri: cerb:automation:cerb.data.records\n              inputs:\n                record_type: group\n                query_required: sort:name\n          schema:\n            layout:\n              filtering@bool: yes\n              headings@bool: no\n              paging@bool: yes\n            columns:\n              selection/id:\n                params:\n                  mode: single\n              card/_label:\n                label: Group\n                params:\n                  bold@bool: yes\n                  image@bool: yes\n                  underline@bool: no\n  \n  set/group:\n    group__context: group\n    group_id: {{prompt_group_id|round}}\n  \n  await/bucket:\n    form:\n      elements:\n        sheet/prompt_bucket_id:\n          label: To which bucket in {{group__label}}:\n          required@bool: yes\n          data:\n            automation:\n              uri: cerb:automation:cerb.data.records\n              inputs:\n                record_type: bucket\n                query_required@text,trim:\n                  group.id:{{prompt_group_id|round}} sort:name\n          default: {{group_default_bucket_id}}\n          schema:\n            layout:\n              filtering@bool: yes\n              headings@bool: no\n              paging@bool: yes\n            columns:\n              selection/id:\n                params:\n                  mode: single\n              card/_label:\n                label: Bucket\n                params:\n                  bold@bool: yes\n                  underline@bool: no\n\n  set/bucket:\n    bucket__context: bucket\n    bucket_id: {{prompt_bucket_id|round}}\n  \n  record.update/ticket:\n    output: updated_ticket\n    inputs:\n      # See: https://cerb.ai/docs/records/types/ticket/#records-api\n      record_type: ticket\n      record_id: {{inputs.ticket.id}}\n      fields:\n        group_id: {{bucket_group_id}}\n        bucket_id: {{bucket_id}}",
    "policy_kata": "commands:\n  record.update:\n    deny/type@bool: {{inputs.record_type is not record type ('ticket')}}\n    deny/fields@bool: {{inputs.fields is not sameas ['group_id','bucket_id']}}\n    allow@bool: yes",
    "created_at": 1618365605,
    "updated_at": 1618365605
}