{
    "name": "ai.cerb.automationBuilder",
    "description": "",
    "extension_id": "cerb.trigger.interaction.worker",
    "script": "start:\r\n  data.query:\r\n    inputs:\r\n      query@text:\r\n        type:automation.autocomplete\r\n        trigger:${trigger}\r\n        path:${path}\r\n        format:dictionaries\r\n      query_params:\r\n        trigger: {{caller_params.trigger}}\r\n        path: {{caller_params.token_path}}\r\n    output: results\r\n    on_success:\r\n      decision:\r\n        outcome/results:\r\n          if@bool:\r\n            {{\r\n              results.data is iterable\r\n              and results.data is not empty\r\n            }}\r\n          then:\r\n            await/suggestions:\r\n              form:\r\n                title: Automation Builder\r\n                elements:\r\n                  sheet/prompt_sheet:\r\n                    data@key: results:data\r\n                    required@bool: yes\r\n                    limit: 100\r\n                    schema:\r\n                      layout:\r\n                        style: grid\r\n                        headings@bool: no\r\n                        filtering@bool: yes\r\n                        paging@bool: yes\r\n                      columns:\r\n                        selection/__index:\r\n                          params:\r\n                            label_key: caption\r\n                            mode: single\r\n                        text/description:\r\n            \r\n            decision/type:\r\n              outcome/hasInteraction:\r\n                if@bool: {{results.data[prompt_sheet].interaction}}\r\n                then:\r\n                  await:\r\n                    interaction:\r\n                      uri: {{results.data[prompt_sheet].interaction}}\r\n                      output: result\r\n                  return:\r\n                    snippet@key: result:snippet\r\n                      \r\n              outcome/else:\r\n                then:\r\n                  return:\r\n                    snippet: {{results.data[prompt_sheet].snippet}}\r\n        outcome/noResults:\r\n          then:\r\n            await:\r\n              form:\r\n                title: Automation Builder\r\n                elements:\r\n                  say:\r\n                    message@text:\r\n                      No suggestions are available at the current location.\r\n                  submit:\r\n                    buttons:\r\n                      continue/done:\r\n                        label: Cancel\r\n                        icon: circle-remove\r\n                        icon_at: start\r\n                      ",
    "policy_kata": "commands:\r\n  data.query:\r\n    deny/type@bool: {{query.type != 'automation.autocomplete'}}\r\n    allow@bool: yes",
    "created_at": 1638934860,
    "updated_at": 1639625558
}